<!DOCTYPE html>
<html lang="en">
<head>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [ ['\\(','\\)']]}});
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>
<meta name="generator" content="plasTeX" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>plasTeX — A Python Framework for Processing LaTeX Documents: Zope Page Template Tutorial</title>
<link rel="next" href="sect0017.html" title="XHTML Renderer" />
<link rel="prev" href="sect0016.html" title="Defining and Using Themes" />
<link rel="up" href="sec-zpt.html" title="Page Template Renderer" />
<link rel="stylesheet" href="styles/theme-green.css" />
</head>

<body>
<nav class="toc">
<svg  class="icon icon-cross close-toc"><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>

<ul class="sub-toc-0">
<li class="">
  <a href="sect0001.html"><span class="toc_ref">1</span> <span class="toc_entry">Introduction</span></a>
 </li>
<li class="">
  <a href="sec-command-line.html"><span class="toc_ref">2</span> <span class="toc_entry"><b class="bf">plastex</b> — The Command-Line Interface</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-1">
     <li class="">
  <a href="sect0002.html"><span class="toc_ref">2.1</span> <span class="toc_entry">Command-Line and Configuration Options</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sec-general-options.html"><span class="toc_ref">2.1.1</span> <span class="toc_entry">General Options</span></a>
 </li>
<li class="">
  <a href="sec-config-document.html"><span class="toc_ref">2.1.2</span> <span class="toc_entry">Document Properties</span></a>
 </li>
<li class="">
  <a href="sect0003.html"><span class="toc_ref">2.1.3</span> <span class="toc_entry">Counters</span></a>
 </li>
<li class="">
  <a href="sec-config-links.html"><span class="toc_ref">2.1.4</span> <span class="toc_entry">Document Links</span></a>
 </li>
<li class="">
  <a href="sec-config-files.html"><span class="toc_ref">2.1.5</span> <span class="toc_entry">Input and Output Files</span></a>
 </li>
<li class="">
  <a href="sec-config-images.html"><span class="toc_ref">2.1.6</span> <span class="toc_entry">Image Options</span></a>
 </li>
<li class="">
  <a href="sec-config-html5.html"><span class="toc_ref">2.1.7</span> <span class="toc_entry">HTML5 Renderer Options</span></a>
 </li>

  </ul>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sec-document.html"><span class="toc_ref">3</span> <span class="toc_entry">The plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Document</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-1">
     <li class="">
  <a href="sec-sections.html"><span class="toc_ref">3.1</span> <span class="toc_entry">Sections</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sec-links.html"><span class="toc_ref">3.1.1</span> <span class="toc_entry">Navigation and Links</span></a>
 </li>
<li class="">
  <a href="sec-tableofcontents.html"><span class="toc_ref">3.1.2</span> <span class="toc_entry">Table of Contents</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sec-paragraphs.html"><span class="toc_ref">3.2</span> <span class="toc_entry">Paragraphs</span></a>
 </li>
<li class="">
  <a href="sec-complexdoc.html"><span class="toc_ref">3.3</span> <span class="toc_entry">Complex Structures</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sec-lists.html"><span class="toc_ref">3.3.1</span> <span class="toc_entry">Lists</span></a>
 </li>
<li class="">
  <a href="sect0004.html"><span class="toc_ref">3.3.2</span> <span class="toc_entry">Bibliography</span></a>
 </li>
<li class="">
  <a href="sec-arrays.html"><span class="toc_ref">3.3.3</span> <span class="toc_entry">Arrays and Tabular Environments</span></a>
 </li>
<li class="">
  <a href="sect0005.html"><span class="toc_ref">3.3.4</span> <span class="toc_entry">Indexes</span></a>
 </li>

  </ul>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sec-macros.html"><span class="toc_ref">4</span> <span class="toc_entry">Understanding Macros and Packages</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-1">
     <li class="">
  <a href="sect0006.html"><span class="toc_ref">4.1</span> <span class="toc_entry">Defining Macros in L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X</span></a>
 </li>
<li class="">
  <a href="sect0007.html"><span class="toc_ref">4.2</span> <span class="toc_entry">Defining Macros in Python</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sec-macroclasses.html"><span class="toc_ref">4.2.1</span> <span class="toc_entry">Python Classes</span></a>
 </li>
<li class="">
  <a href="sec-inimacros.html"><span class="toc_ref">4.2.2</span> <span class="toc_entry">INI Files</span></a>
 </li>
<li class="">
  <a href="sec-contextmacros.html"><span class="toc_ref">4.2.3</span> <span class="toc_entry">The Document Context</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sec-packages.html"><span class="toc_ref">4.3</span> <span class="toc_entry">Packages</span></a>
 </li>

  </ul>
 </li>
<li class=" active">
  <a href="sect0008.html"><span class="toc_ref">5</span> <span class="toc_entry">Renderers</span></a>
<svg  class="icon icon-cross expand-toc"><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
  <ul class="sub-toc-1 active">
     <li class="">
  <a href="sec-simple-renderer-ex.html"><span class="toc_ref">5.1</span> <span class="toc_entry">Simple Renderer Example</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0009.html"><span class="toc_ref">5.1.1</span> <span class="toc_entry">Extending the Simple Renderer</span></a>
 </li>
<li class="">
  <a href="subsec-renderer-from-script.html"><span class="toc_ref">5.1.2</span> <span class="toc_entry">Using a Renderer from the plastex Script</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sec-renderable.html"><span class="toc_ref">5.2</span> <span class="toc_entry">Renderable Objects</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0010.html"><span class="toc_ref">5.2.1</span> <span class="toc_entry">Determining the Correct Rendering Method</span></a>
 </li>
<li class="">
  <a href="sect0011.html"><span class="toc_ref">5.2.2</span> <span class="toc_entry">Generating Files</span></a>
 </li>
<li class="">
  <a href="sect0012.html"><span class="toc_ref">5.2.3</span> <span class="toc_entry">Generating Images</span></a>
 </li>
<li class="">
  <a href="sect0013.html"><span class="toc_ref">5.2.4</span> <span class="toc_entry">Generating Vector Images</span></a>
 </li>
<li class="">
  <a href="sect0014.html"><span class="toc_ref">5.2.5</span> <span class="toc_entry">Static Images</span></a>
 </li>

  </ul>
 </li>
<li class=" active">
  <a href="sec-zpt.html"><span class="toc_ref">5.3</span> <span class="toc_entry">Page Template Renderer</span></a>
<svg  class="icon icon-cross expand-toc"><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
  <ul class="sub-toc-2 active">
     <li class="">
  <a href="sect0015.html"><span class="toc_ref">5.3.1</span> <span class="toc_entry">Defining and Using Templates</span></a>
 </li>
<li class="">
  <a href="sect0016.html"><span class="toc_ref">5.3.2</span> <span class="toc_entry">Defining and Using Themes</span></a>
 </li>
<li class=" active current">
  <a href="sec-zpttutorial.html"><span class="toc_ref">5.3.3</span> <span class="toc_entry">Zope Page Template Tutorial</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sect0017.html"><span class="toc_ref">5.4</span> <span class="toc_entry">XHTML Renderer</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0018.html"><span class="toc_ref">5.4.1</span> <span class="toc_entry">Themes</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sec-html5.html"><span class="toc_ref">5.5</span> <span class="toc_entry">HTML5 Renderer</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sec-html5-pkg.html"><span class="toc_ref">5.5.1</span> <span class="toc_entry">Interactions with packages</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sect0019.html"><span class="toc_ref">5.6</span> <span class="toc_entry">tBook Renderer</span></a>
 </li>
<li class="">
  <a href="sect0020.html"><span class="toc_ref">5.7</span> <span class="toc_entry">DocBook Renderer</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sect0021.html"><span class="toc_ref">6</span> <span class="toc_entry">plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Frameworks and APIs</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-1">
     <li class="">
  <a href="sec-macros-api.html"><span class="toc_ref">6.1</span> <span class="toc_entry"><span class="ttfamily">plasTeX</span> — The Python Macro and Document Interfaces</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0022.html"><span class="toc_ref">6.1.1</span> <span class="toc_entry">Macro Objects</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="module-plasTeX-ConfigManager.html"><span class="toc_ref">6.2</span> <span class="toc_entry"><span class="ttfamily">plasTeX.ConfigManager</span> — plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Configuration</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0023.html"><span class="toc_ref">6.2.1</span> <span class="toc_entry">ConfigManager Objects</span></a>
 </li>
<li class="">
  <a href="sect0024.html"><span class="toc_ref">6.2.2</span> <span class="toc_entry">ConfigSection Objects</span></a>
 </li>
<li class="">
  <a href="sect0025.html"><span class="toc_ref">6.2.3</span> <span class="toc_entry">Configuration Option Types</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="module-plasTeX-DOM.html"><span class="toc_ref">6.3</span> <span class="toc_entry"><span class="ttfamily">plasTeX.DOM</span> — The plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Document Object Model (DOM)</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0026.html"><span class="toc_ref">6.3.1</span> <span class="toc_entry">plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X vs. XML</span></a>
 </li>
<li class="">
  <a href="sect0027.html"><span class="toc_ref">6.3.2</span> <span class="toc_entry">Node Objects</span></a>
 </li>
<li class="">
  <a href="sect0028.html"><span class="toc_ref">6.3.3</span> <span class="toc_entry">DocumentFragment Objects</span></a>
 </li>
<li class="">
  <a href="sect0029.html"><span class="toc_ref">6.3.4</span> <span class="toc_entry">Element Objects</span></a>
 </li>
<li class="">
  <a href="sect0030.html"><span class="toc_ref">6.3.5</span> <span class="toc_entry">Text Objects</span></a>
 </li>
<li class="">
  <a href="sect0031.html"><span class="toc_ref">6.3.6</span> <span class="toc_entry">Document Objects</span></a>
 </li>
<li class="">
  <a href="sect0032.html"><span class="toc_ref">6.3.7</span> <span class="toc_entry">Command Objects</span></a>
 </li>
<li class="">
  <a href="sect0033.html"><span class="toc_ref">6.3.8</span> <span class="toc_entry">Environment Objects</span></a>
 </li>
<li class="">
  <a href="sect0034.html"><span class="toc_ref">6.3.9</span> <span class="toc_entry">TeXFragment Objects</span></a>
 </li>
<li class="">
  <a href="sect0035.html"><span class="toc_ref">6.3.10</span> <span class="toc_entry">TeXDocument Objects</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="module-plasTeX-TeX.html"><span class="toc_ref">6.4</span> <span class="toc_entry"><span class="ttfamily">plasTeX.TeX</span> — The T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Stream</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0036.html"><span class="toc_ref">6.4.1</span> <span class="toc_entry">TeX Objects</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="module-plasTeX-Context.html"><span class="toc_ref">6.5</span> <span class="toc_entry"><span class="ttfamily">plasTeX.Context</span> — The T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Context</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0037.html"><span class="toc_ref">6.5.1</span> <span class="toc_entry">Context Objects</span></a>
 </li>
<li class="">
  <a href="sec-context-language.html"><span class="toc_ref">6.5.2</span> <span class="toc_entry">Context language</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="module-plasTeX-Renderers.html"><span class="toc_ref">6.6</span> <span class="toc_entry"><span class="ttfamily">plasTeX.Renderers</span> — The plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Rendering Framework</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0038.html"><span class="toc_ref">6.6.1</span> <span class="toc_entry">Renderer Objects</span></a>
 </li>
<li class="">
  <a href="sect0039.html"><span class="toc_ref">6.6.2</span> <span class="toc_entry">Renderable MixIn</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="module-plasTeX-Imagers.html"><span class="toc_ref">6.7</span> <span class="toc_entry"><span class="ttfamily">plasTeX.Imagers</span> — The plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Imaging Framework</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0040.html"><span class="toc_ref">6.7.1</span> <span class="toc_entry">Imager Objects</span></a>
 </li>
<li class="">
  <a href="sect0041.html"><span class="toc_ref">6.7.2</span> <span class="toc_entry">Image Objects</span></a>
 </li>

  </ul>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sect0042.html"><span class="toc_ref">A</span> <span class="toc_entry">About This Document</span></a>
 </li>
<li class="">
  <a href="sect0043.html"><span class="toc_ref">B</span> <span class="toc_entry">Frequently Asked Questions</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-1">
     <li class="">
  <a href="sect0044.html"><span class="toc_ref">B.1</span> <span class="toc_entry">Parsing L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X</span></a>
<svg  class="icon icon-plus expand-toc"><use xlink:href="symbol-defs.svg#icon-plus"></use></svg>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0045.html"><span class="toc_ref">B.1.1</span> <span class="toc_entry">How can I make plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X work with my complicated macros?</span></a>
 </li>
<li class="">
  <a href="sect0046.html"><span class="toc_ref">B.1.2</span> <span class="toc_entry">How can I get plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X to find my L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X packages?</span></a>
 </li>

  </ul>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sect0047.html"><span class="toc_ref">C</span> <span class="toc_entry">Index</span></a>
 </li>
</ul>
</nav>

<div class="wrapper with-toc">
<header>
<h1 id="doc_title">plasTeX — A Python Framework for Processing LaTeX Documents</h1>
</header>

<ul class="breadcrumbs">
<li class="crumb"><a href="index.html" class="crumb">plasTeX — A Python Framework for Processing LaTeX Documents</a></li>
<li class="crumb"><a href="sect0008.html" class="crumb">Renderers</a></li>
<li class="crumb"><a href="sec-zpt.html" class="crumb">Page Template Renderer</a></li>
  <li class="last_crumb">Zope Page Template Tutorial</li>
</ul>

<div class="content">
<h2 id="sec:zpttutorial">5.3.3 Zope Page Template Tutorial</h2>
<p>The Zope Page Template (ZPT) language is actually just a set of XML attributes that can be applied to markup of an DTD. These attributes tell the ZPT interpreter how to process the element. There are seven different attributes that you can use to direct the processing of an XML or HTML file (in order of evaluation): define, condition, repeat, content, replace, attributes, and omit-tag. These attributes are described in section <a href="sec-zpttutorial.html#sec:talattributes">None</a>. For a more complete description, see the official ZPT documentation at <a href="http://www.zope.org/Documentation/Books/ZopeBook/2_6Edition/ZPT.stx">http://www.zope.org/Documentation/Books/ZopeBook/2_6Edition/ZPT.stx</a>. </p>
<h3 id="a0000000075">Template Attribute Language Expression Syntax (TALES)</h3>
<p>The Template Attribute Language Expression Syntax (TALES) is used by the attribute language described in the next section. The TALES syntax is used to evaluate expressions based on objects in the template namespace. The results of these expressions can be used to define variables, produce output, or be used as booleans. There are also several operators used to modify the behavior or interpretation of an expression. The expressions and their modifiers are described below. </p>
<h4 id="sec:pathoperator">path: operator</h4>
<p>A “path” is the most basic form on an expression in ZPT. The basic form is shown below. </p>
<pre class="verbatim">
[path:]string [ | TALES expression ]
</pre>
<p>The <span class="rmfamily"><i class="itshape">path: </i></span> operator is actually optional on all paths. Leaving it off makes no difference. The “string” in the above syntax is a ’/’ delimited string of names. Each name refers to a property of the previous name in the string. Properties can include attributes, methods, or keys in a dictionary. These properties can in turn have properties of their own. Some examples of paths are shown below. </p>
<pre class="verbatim">
# Access the parentNode attribute of chapter, then get its title
chapter/parentNode/title

# Get the key named 'foo' from the dictionary bar
bar/foo

# Call the title method on the string in the variable booktitle
booktitle/title
</pre>
<p>It is possible to specify multiple paths separated by a pipe (|). These paths are evaluated from left to right. The first one to return a non-None value is used. </p>
<pre class="verbatim">
# Look for the title on the current chapter node as well as its parents
chapter/title | chapter/parentNode/title | chapter/parentNode/parentNode/title

# Look for the value of the option otherwise get its default value
myoptions/encoding | myoptions/defaultencoding
</pre>
<p>There are a few keywords that can be used in place of a path in a TALES expression as well. <div class="centered"><table class="tabular">
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><b class="bf">Name</b></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p><b class="bf">Purpose</b> </p>

    </td>
  </tr>
  <tr>
    <td  style="border-top-style:solid; text-align:left; border-top-color:black; border-top-width:1px; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> <span class="rmfamily"><i class="itshape">nothing </i></span></p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left" 
        rowspan=""
        colspan="">
      <p>same as <span class="rmfamily"><i class="itshape">None </i></span> in Python</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">default </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>keeps whatever the existing value of the element or attribute is</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">options </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>dictionary of values passed in to the template when instatiated</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">repeat </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>the repeat variable (see <a href="sec-zpttutorial.html#sec:talrepeat">None</a>)</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">attrs </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>dictonary of the original attributes of the element</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">CONTEXTS </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>dictionary containing all of the above</p>

    </td>
  </tr>
</table></div> </p>
<h4 id="a0000000076">exists: operator</h4>
<p>This operator returns true if the path exists. If the path does not exist, the operator returns false. The syntax is as follows. </p>
<pre class="verbatim">
exists:path
</pre>
<p>The “path” in the code above is a path as described in section <a href="sec-zpttutorial.html#sec:pathoperator">None</a>. This operator is commonly combined with the not: operator. </p>
<h4 id="a0000000077">nocall: operator</h4>
<p>By default, if a property that is retrieved is callable, it will be called automatically. Using the nocall: operator, prevents this execution from happening. The syntax is shown below. </p>
<pre class="verbatim">
nocall:path
</pre>
<h4 id="a0000000078">not: operator</h4>
<p>The not: operator simply negates the boolean result of the path. If the path is a boolean true, the not: operator will return false, and vice versa. The syntax is shown below. </p>
<pre class="verbatim">
not:path
</pre>
<h4 id="a0000000079">string: operator</h4>
<p>The string: operator allows you to combine literal strings and paths into one string. Paths are inserted into the literal string using a syntax much like that of Python Templates: $path or ${path}. The general syntax is: </p>
<pre class="verbatim">
string:text
</pre>
<p>Here are some examples of using the string: operator. </p>
<pre class="verbatim">
string:Next - ${section/links/next}
string:($pagenumber)
string:[${figure/number}] ${figure/caption}
</pre>
<h4 id="a0000000080">python: operator</h4>
<p>The python: operator allows you to evaluate a Python expression. The syntax is as follows. </p>
<pre class="verbatim">
python:python-code
</pre>
<p>The “python-code” in the expression above can include any of the Python built-in functions and operators as well as four new functions that correspond to the TALES operators: path, string, exists, and nocall. Each of these functions takes a string containing the path to be evaluated (e.g. path(’foo/bar’), exists(’chapter/title’), etc.). </p>
<p>When using Python operators, you must escape any characters that would not be legal in an XML/HTML document (i.e. &lt;&gt;&amp;). For example, to write an expression to test if a number was less than or greater than two numbers, you would need to do something like the following example. </p>
<pre class="verbatim">
# See if the figure number is less than 2 or greater than 4
python: path('figure/number') &amp;lt; 2 or path('figure/number') &amp;gt; 4
</pre>
<h4 id="a0000000081">stripped: operator</h4>
<p>The stripped: operator only exists in the SimpleTAL distribution provided by plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X. It evaluates the given path and removes any markup from that path. Essentially, it is a way to get a plain text representation of the path. The syntax is as follows. </p>
<pre class="verbatim">
stripped:path
</pre>
<h3 id="sec:talattributes">Template Attribute Language (TAL) Attributes</h3>
<h4 id="a0000000082">tal:define</h4>
<p>The <span class="ttfamily">tal:define</span> attribute allows you to define a variable for use later in the template. Variables can be specifies as local (only for use in the scope of the current element) or global (for use anywhere in the template). The syntax of the define attribute is shown below. </p>
<pre class="verbatim">
tal:define="[ local | global ] name expression [; define-expression ]"
</pre>
<p>The define attributes sets the value of “name” to “expression.” By default, the scope of the variable is local, but can be specified as global by including the “global” keyword before the name of the variable. As shown in the grammar above, you can specify multiple variables in one <span class="ttfamily">tal:define</span> attribute by separating the define expressions by semi-colons. </p>
<p>Examples of using the <span class="ttfamily">tal:define</span> attribute are shown belaw. </p>
<pre class="verbatim">
&lt;p tal:define="global title document/title; 
               next self/links/next;
               previous self/links/previous;
               length python:len(self);
               up string:Up - ${self/links/up}"&gt;
...
&lt;/p&gt;
</pre>
<h4 id="a0000000083">tal:condition</h4>
<p>The <span class="ttfamily">tal:condition</span> attribute allows you to conditionally include an element. The syntax is shown below. </p>
<pre class="verbatim">
tal:condition="expression"
</pre>
<p>The <span class="ttfamily">tal:condition</span> attribute is very simple. If the expression evaluates to true, the element and its children will be evaluated and included in the output. If the expression evaluates to false, the element and its children will not be evaluated or included in the output. Valid expressions for the <span class="ttfamily">tal:condition</span> attribute are the same as those for the expressions in the <span class="ttfamily">tal:define</span> attribute. </p>
<pre class="verbatim">
&lt;p tal:condition="python:len(self)"&gt;
    &lt;b tal:condition="self/caption"&gt;Caption for paragraph&lt;/b&gt;
    ...
&lt;/p&gt;
</pre>
<h4 id="sec:talrepeat">tal:repeat</h4>
<p>The <span class="ttfamily">tal:repeat</span> attribute allows you to repeat an element multiple times; the syntax is shown below. </p>
<pre class="verbatim">
tal:repeat="name expression"
</pre>
<p>When the <span class="ttfamily">tal:repeat</span> attribute is used on an element, the result of“expression” is iterated over, and a new element is generated for each item in the iteration. The value of the current item is set to “name” much like in the <span class="ttfamily">tal:define</span> attribute. </p>
<p>Within the scope of the repeated element, another variable is available: <span class="rmfamily"><i class="itshape">repeat </i></span>. This variable contains several properties related to the loop. <div class="centered"><table class="tabular">
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><b class="bf">Name</b></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p><b class="bf">Purpose</b> </p>

    </td>
  </tr>
  <tr>
    <td  style="border-top-style:solid; text-align:left; border-top-color:black; border-top-width:1px; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> <span class="rmfamily"><i class="itshape">index </i></span></p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left" 
        rowspan=""
        colspan="">
      <p>number of the current iteration starting from zero</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">number </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>number of the current iteration starting from one</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">even </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>is true if the iteration number is even</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">odd </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>is true if the iteration number is odd</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">start </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>is true if this is the first iteration</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">end </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>is true if this is the last iteration; This is never true if the repeat expression returns an iterator</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">length </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>the length of the sequence being iterated over; This is set to <span class="rmfamily"><i class="itshape">sys.maxint </i></span> for iterators.</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">letter </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>lower case letter corresponding to the current iteration number starting with ’a’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">Letter </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>upper case letter corresponding to the current iteration number starting with ’A’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">roman </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>lower case Roman numeral corresponding to the current iteration number starting with ’i’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">Roman </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>upper case Roman numeral corresponding to the current iteration number starting with ’I’</p>

    </td>
  </tr>
</table></div> </p>
<p>To access the properties listed above, you must use the property of the <span class="rmfamily"><i class="itshape">repeat </i></span> variable that corresponds to the repeat variable name. For example, if your repeat variable name is “item”, you would access the above variables using the expressions <span class="rmfamily"><i class="itshape">repeat/item/index </i></span>, <span class="rmfamily"><i class="itshape">repeat/item/number </i></span>, <span class="rmfamily"><i class="itshape">repeat/item/even </i></span>, etc. </p>
<p>A simple example of the <span class="ttfamily">tal:repeat</span> attribute is shown below. </p>
<pre class="verbatim">
&lt;ol&gt;
&lt;li tal:repeat="option options" tal:content="option/name"&gt;option name&lt;/li&gt;
&lt;/ol&gt;
</pre>
<p>One commonly used feature of rendering tables is alternating row colors. This is a little bit tricky with ZPT since the <span class="ttfamily">tal:condition</span> attribute is evaluated before the <span class="ttfamily">tal:repeat</span> directive. You can get around this by using the <span class="ttfamily">metal:</span> namespace. This is the namespace used by ZPT’s macro language<a class="footnote" href="#a0000000084">
  <sup class="footnotemark">1</sup>
</a> You can create another element around the element you want to be conditional. This wrapper element is simply there to do the iterating, but is not included in the output. The example below shows how to do alternating row colors in an HTML table. </p>
<pre class="verbatim">
&lt;table&gt;
&lt;metal:block tal:repeat="employee employees"&gt;
&lt;!-- even rows --&gt;
&lt;tr tal:condition="repeat/employee/even" style="background-color: white"&gt;
    &lt;td tal:content="employee/name"&gt;&lt;/td&gt;
    &lt;td tal:content="employee/title"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;!-- odd rows --&gt;
&lt;tr tal:condition="repeat/employee/odd" style="background-color: gray"&gt;
    &lt;td tal:content="employee/name"&gt;&lt;/td&gt;
    &lt;td tal:content="employee/title"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/metal:block&gt;
&lt;/table&gt;
</pre>
<h4 id="a0000000085">tal:content</h4>
<p>The <span class="ttfamily">tal:content</span> attribute evaluates an expression and replaces the content of the element with the result of the expression. The syntax is shown below. </p>
<pre class="verbatim">
tal:content="[ text | structure ] expression"
</pre>
<p>The <span class="rmfamily"><i class="itshape">text </i></span> and <span class="rmfamily"><i class="itshape">structure </i></span> options in the <span class="ttfamily">tal:content</span> attribute indicate whether or not the content returned by the expression should be escaped (i.e. "&amp;&lt;&gt; replaced by &amp;quot;, &amp;amp;, &amp;lt;, and &amp;gt;, respectively). When the <span class="rmfamily"><i class="itshape">text </i></span> option is used, these special characters are escaped; this is the default behavior. When the <span class="rmfamily"><i class="itshape">structure </i></span> option is specified, the result of the expression is assumed to be valid markup and is not escaped. </p>
<p>In SimpleTAL, the default behavior is the same as using the <span class="rmfamily"><i class="itshape">text </i></span> option. However, in plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X, 99.9% of the time the content returned by the expression is valid markup, so the default was changed to <span class="rmfamily"><i class="itshape">structure </i></span> in the SimpleTAL package distributed with plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X. </p>
<h4 id="a0000000086">tal:replace</h4>
<p>The <span class="ttfamily">tal:replace</span> attribute is much like the <span class="ttfamily">tal:content</span> attribute. They both evaluate an expression and include the content of that expression in the output, and they both have a <span class="rmfamily"><i class="itshape">text </i></span> and <span class="rmfamily"><i class="itshape">structure </i></span> option to indicate escaping of special characters. The difference is that when the <span class="ttfamily">tal:replace</span> attribute is used, the element with the <span class="ttfamily">tal:replace</span> attribute on it is not included in the output. Only the content of the evaluated expression is returned. The syntax of the <span class="ttfamily">tal:replace</span> attribute is shown below. </p>
<pre class="verbatim">
tal:replace="[ text | structure ] expression"
</pre>
<h4 id="a0000000087">tal:attributes</h4>
<p>The <span class="ttfamily">tal:attributes</span> attribute allows you to programatically create attributes on the element. The syntax is shown below. </p>
<pre class="verbatim">
tal:attributes="name expression [; attribute-expression ]"
</pre>
<p>The syntax of the <span class="ttfamily">tal:attributes</span> attribute is very similar to that of the <span class="ttfamily">tal:define</span> attribute. However, in the case of the <span class="ttfamily">tal:attributes</span> attribute, the name is the name of the attribute to be created on the element and the expression is evaluated to get the value of the attribute. If an error occurs or <span class="rmfamily"><i class="itshape">None </i></span> is returned by the expression, then the attribute is removed from the element. </p>
<p>Just as in the case of the <span class="ttfamily">tal:define</span> attribute, you can specify multiple attributes separated by semi-colons (;). If a semi-colon character is needed in the expression, then it must be represented by a double semi-colon (;;). </p>
<p>An example of using the <span class="ttfamily">tal:attributes</span> is shown below. </p>
<pre class="verbatim">
&lt;a tal:attributes="href self/links/next/url; 
                   title self/links/next/title"&gt;link text&lt;/a&gt;
</pre>
<h4 id="a0000000088">tal:omit-tag</h4>
<p>The <span class="ttfamily">tal:omit-tag</span> attribute allows you to conditionally omit an element. The syntax is shown below. </p>
<pre class="verbatim">
tal:omit-tag="expression"
</pre>
<p>If the value of “expression” evaluates to true (or is empty), the element is omitted; however, the content of the element is still sent to the output. If the expression evaluates to false, the element is included in the output. </p>

<footer id="footnotes">
<ol>
  <li id="a0000000084">The macro language isn’t discussed here. See the official ZPT documentation for more information.</li>
</ol>
</footer>
</div>

<nav class="prev_up_next">
  <a href="sect0016.html" title="Defining and Using Themes"><svg  class="icon icon-arrow-left "><use xlink:href="symbol-defs.svg#icon-arrow-left"></use></svg>
</a>
  <a href="sec-zpt.html" title="Page Template Renderer"><svg  class="icon icon-arrow-up "><use xlink:href="symbol-defs.svg#icon-arrow-up"></use></svg>
</a>
  <a href="sect0017.html" title="XHTML Renderer"><svg  class="icon icon-arrow-right "><use xlink:href="symbol-defs.svg#icon-arrow-right"></use></svg>
</a>
  <a href="sect0047.html" class="index">Index</a>
<svg  id="toc-toggle" class="icon icon-list-numbered "><use xlink:href="symbol-defs.svg#icon-list-numbered"></use></svg>
</nav>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/plastex.js"></script>
<script type="text/javascript" src="js/svgxuse.js"></script>
</div>
</body>
</html>